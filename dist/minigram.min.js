/*! minigram v0.1.0 | (c) 2016 Pedro Rogerio | https://github.com/pinceladasdaweb/minigram */
!function(t,e){"use strict";"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.Minigram=e()}(this,function(){"use strict";var t=function(e,i){return this&&this instanceof t?i?(this.endpoint="https://api.instagram.com/v1/users/",this.container=e instanceof Node?e:document.querySelector(e),this.counter=i.counter||10,this.resolution=i.resolution||"thumb",this.token=i.token,this.html=i.html,this.before=i.before||void 0,this.after=i.after||void 0,this.error=i.error||void 0,this.success=i.success||void 0,this.isHtml(this.html)?void this.fetch():void console.warn("Minigram: Please check your HTML template because it is not valid.")):void console.log("%c Missing options","background: red; color: white"):new t(e,i)};return t.prototype={fetch:function(){if("String"!==this.token.constructor.name)return void console.log("%c Provide a valid token","background: red; color: white");var t=this.token.split(".")[0];"function"==typeof this.before&&this.before.call(),this.getPhotos(t)},jsonp:function(t,e,i){var o,n,r,s;o="jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),n=document.head||document.getElementsByTagName("head")[0],s=document.createElement("script"),s.type="text/javascript",r=s.cloneNode(),r.src=t+(t.indexOf("?")>=0?"&":"?")+"callback="+o,r.async=!0,n.appendChild(r),window[o]=function(t){e.call(i||window,t),n.removeChild(r),r=null,delete this.name}.bind(this)},template:function(t,e){var i;for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t=t.replace(new RegExp("{"+i+"}","g"),e[i]));return t},each:function(t,e){var i,o;for(i=0,o=t.length;i<o;i+=1)e(t[i],i,t)},isHtml:function(t){var e=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];if(/\s?<!doctype html>|(<html\b[^>]*>|<body\b[^>]*>|<x-[^>]+>)+/i.test(t))return!0;var i=new RegExp(e.map(function(t){return"<"+t+"\\b[^>]*>"}).join("|"),"i");return i.test(t)},getObjectProperty:function(t,e){var i,o;for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o=t[e]);return o},getPhotos:function(t){var e;this.jsonp(this.endpoint+t+"/media/recent?access_token="+this.token+"&count="+this.counter,function(t){e=t.meta.code,200===e?("function"==typeof this.after&&this.after.call(),this.each(t.data,function(e,i){t={caption:e.caption?e.caption.text:"",url:e.link,type:e.type,likes:e.likes.count,filter:e.filter,image:{thumb:e.images.thumbnail.url,low:e.images.low_resolution.url,standard:e.images.standard_resolution.url}},this.attach(t)}.bind(this)),"function"==typeof this.success&&this.success.call()):("function"==typeof this.error&&this.error.call(this,t),console.warn("Minigram: "+t.meta.error_message))}.bind(this))},attach:function(t){var e;e=this.template(this.html,{caption:t.caption,url:t.url,type:t.type,likes:t.likes,filter:t.filter,image:this.getObjectProperty(t.image,this.resolution)}),this.container.insertAdjacentHTML("beforeend",e)}},t});